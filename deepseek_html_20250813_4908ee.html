<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eden's Greenery - Your Local Plant Shop</title>
    <style>
        /* (Previous CSS remains the same, adding new styles below) */
        
        /* Shopping Cart Styles */
        .cart-icon {
            position: relative;
            margin-left: 30px;
            font-size: 1.5rem;
            color: var(--dark-green);
            cursor: pointer;
        }
        
        .cart-count {
            position: absolute;
            top: -10px;
            right: -10px;
            background: var(--accent-brown);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
        }
        
        .cart-overlay {
            position: fixed;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            display: none;
        }
        
        .cart-container {
            position: fixed;
            top: 0;
            right: 0;
            width: 400px;
            height: 100%;
            background: white;
            box-shadow: -5px 0 15px rgba(0,0,0,0.1);
            overflow-y: auto;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 1000;
        }
        
        .cart-container.active {
            transform: translateX(0);
        }
        
        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #eee;
        }
        
        .close-cart {
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .cart-items {
            padding: 20px;
        }
        
        .cart-item {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
            padding-bottom: 20px;
        }
        
        .cart-item-img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 5px;
            margin-right: 15px;
        }
        
        .cart-item-details {
            flex: 1;
        }
        
        .cart-item-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .cart-item-price {
            color: var(--secondary-green);
            font-weight: 600;
        }
        
        .cart-item-remove {
            color: #ff6b6b;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .cart-item-quantity {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }
        
        .cart-item-quantity button {
            background: #f1f1f1;
            border: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
        }
        
        .cart-item-quantity span {
            margin: 0 10px;
        }
        
        .cart-total {
            padding: 20px;
            border-top: 1px solid #eee;
            text-align: right;
            font-weight: 600;
            font-size: 1.2rem;
        }
        
        .cart-checkout {
            padding: 20px;
        }
        
        /* Product Page Styles */
        .product-page {
            padding: 80px 0;
        }
        
        .product-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
        }
        
        .product-gallery {
            display: grid;
            grid-template-columns: 100px 1fr;
            gap: 20px;
        }
        
        .product-thumbnails {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .product-thumbnail {
            width: 100%;
            height: 80px;
            object-fit: cover;
            border-radius: 5px;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .product-thumbnail.active {
            border-color: var(--secondary-green);
        }
        
        .product-main-img {
            width: 100%;
            height: 500px;
            object-fit: cover;
            border-radius: 10px;
        }
        
        .product-info h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }
        
        .product-price {
            font-size: 1.8rem;
            color: var(--secondary-green);
            font-weight: 600;
            margin: 20px 0;
        }
        
        .product-description {
            margin-bottom: 30px;
            line-height: 1.8;
        }
        
        .product-details {
            margin-bottom: 30px;
        }
        
        .product-details h3 {
            margin-bottom: 15px;
        }
        
        .product-details ul {
            list-style-position: inside;
        }
        
        .product-details li {
            margin-bottom: 8px;
        }
        
        .add-to-cart-form {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        .quantity-selector {
            display: flex;
            align-items: center;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        .quantity-btn {
            background: none;
            border: none;
            font-size: 1.2rem;
            width: 40px;
            height: 40px;
            cursor: pointer;
        }
        
        .quantity-input {
            width: 50px;
            text-align: center;
            border: none;
            font-size: 1rem;
        }
        
        /* Checkout Page Styles */
        .checkout-page {
            padding: 80px 0;
        }
        
        .checkout-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
        }
        
        .checkout-form h2, .order-summary h2 {
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: 'Open Sans', sans-serif;
        }
        
        .order-summary {
            background: #f9f9f9;
            padding: 30px;
            border-radius: 10px;
        }
        
        .order-items {
            margin-bottom: 30px;
        }
        
        .order-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .order-total {
            display: flex;
            justify-content: space-between;
            font-weight: 600;
            font-size: 1.2rem;
            margin-top: 20px;
        }
        
        #payment-element {
            margin: 30px 0;
        }
        
        /* Responsive additions */
        @media (max-width: 992px) {
            .product-container, .checkout-container {
                grid-template-columns: 1fr;
            }
            
            .product-gallery {
                grid-template-columns: 1fr;
            }
            
            .product-thumbnails {
                flex-direction: row;
                order: 1;
            }
            
            .cart-container {
                width: 100%;
            }
        }
    </style>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <!-- Stripe.js -->
    <script src="https://js.stripe.com/v3/"></script>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <div class="logo">
                <i class="fas fa-leaf"></i>
                <span>Eden's Greenery</span>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="shop.html">Shop</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li>
                        <div class="cart-icon" id="cart-icon">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="cart-count">0</span>
                        </div>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Shopping Cart Overlay -->
    <div class="cart-overlay" id="cart-overlay"></div>
    
    <!-- Shopping Cart Sidebar -->
    <div class="cart-container" id="cart-container">
        <div class="cart-header">
            <h3>Your Cart</h3>
            <div class="close-cart" id="close-cart">
                <i class="fas fa-times"></i>
            </div>
        </div>
        <div class="cart-items" id="cart-items">
            <!-- Cart items will be added dynamically -->
            <div class="empty-cart-message">
                <p>Your cart is empty</p>
            </div>
        </div>
        <div class="cart-total">
            Total: $<span id="cart-total">0.00</span>
        </div>
        <div class="cart-checkout">
            <a href="checkout.html" class="btn" style="width: 100%; text-align: center;">Proceed to Checkout</a>
        </div>
    </div>

    <!-- Product Page Content -->
    <section class="product-page">
        <div class="container">
            <div class="product-container">
                <div class="product-gallery">
                    <div class="product-thumbnails">
                        <img src="https://images.unsplash.com/photo-1520412099551-62b6bafeb5bb?ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80" 
                             alt="Monstera Deliciosa" 
                             class="product-thumbnail active"
                             data-main="https://images.unsplash.com/photo-1520412099551-62b6bafeb5bb?ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80">
                        <img src="https://images.unsplash.com/photo-1497250681960-ef046c08a56e?ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80" 
                             alt="Monstera Deliciosa angle" 
                             class="product-thumbnail"
                             data-main="https://images.unsplash.com/photo-1497250681960-ef046c08a56e?ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80">
                        <img src="https://images.unsplash.com/photo-1517848568502-d03fa74e1964?ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80" 
                             alt="Monstera Deliciosa closeup" 
                             class="product-thumbnail"
                             data-main="https://images.unsplash.com/photo-1517848568502-d03fa74e1964?ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80">
                    </div>
                    <div class="product-main-image">
                        <img src="https://images.unsplash.com/photo-1520412099551-62b6bafeb5bb?ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80" 
                             alt="Monstera Deliciosa" 
                             class="product-main-img">
                    </div>
                </div>
                
                <div class="product-info">
                    <h1>Monstera Deliciosa</h1>
                    <div class="product-price">$34.99</div>
                    <div class="product-description">
                        <p>The Monstera Deliciosa, also known as the Swiss Cheese Plant, is a tropical beauty featuring large, glossy leaves with unique splits and holes. This easy-care plant adds a dramatic tropical feel to any space.</p>
                    </div>
                    
                    <div class="product-details">
                        <h3>Details</h3>
                        <ul>
                            <li><strong>Light:</strong> Bright, indirect light</li>
                            <li><strong>Water:</strong> Water when top 2 inches of soil are dry</li>
                            <li><strong>Humidity:</strong> Prefers higher humidity</li>
                            <li><strong>Difficulty:</strong> Easy to moderate</li>
                            <li><strong>Pet Friendly:</strong> No - toxic to pets</li>
                            <li><strong>Height:</strong> 24-36" (including pot)</li>
                            <li><strong>Pot Size:</strong> 10" diameter</li>
                        </ul>
                    </div>
                    
                    <div class="add-to-cart-form">
                        <div class="quantity-selector">
                            <button class="quantity-btn minus">-</button>
                            <input type="number" class="quantity-input" value="1" min="1">
                            <button class="quantity-btn plus">+</button>
                        </div>
                        <button class="btn add-to-cart" 
                                data-id="1" 
                                data-name="Monstera Deliciosa" 
                                data-price="34.99" 
                                data-image="https://images.unsplash.com/photo-1520412099551-62b6bafeb5bb?ixlib=rb-1.2.1&auto=format&fit=crop&w=634&q=80">
                            Add to Cart
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Checkout Page (would normally be a separate page) -->
    <section class="checkout-page" style="display: none;">
        <div class="container">
            <div class="checkout-container">
                <div class="checkout-form">
                    <h2>Shipping Information</h2>
                    <form id="checkout-form">
                        <div class="form-group">
                            <label for="name">Full Name</label>
                            <input type="text" id="name" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" required>
                        </div>
                        <div class="form-group">
                            <label for="address">Address</label>
                            <input type="text" id="address" required>
                        </div>
                        <div class="form-group">
                            <label for="city">City</label>
                            <input type="text" id="city" required>
                        </div>
                        <div class="form-group">
                            <label for="zip">ZIP Code</label>
                            <input type="text" id="zip" required>
                        </div>
                        <div id="payment-element">
                            <!-- Stripe Payment Element will be inserted here -->
                        </div>
                        <button type="submit" class="btn" id="submit-button">
                            Pay $<span id="checkout-total">0.00</span>
                        </button>
                    </form>
                </div>
                
                <div class="order-summary">
                    <h2>Your Order</h2>
                    <div class="order-items" id="checkout-items">
                        <!-- Order items will be added dynamically -->
                    </div>
                    <div class="order-total">
                        <span>Total</span>
                        <span>$<span id="order-total">0.00</span></span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- (Previous footer remains the same) -->

    <script>
        // Shopping Cart Functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Cart elements
            const cartIcon = document.getElementById('cart-icon');
            const cartOverlay = document.getElementById('cart-overlay');
            const cartContainer = document.getElementById('cart-container');
            const closeCart = document.getElementById('close-cart');
            const cartItemsContainer = document.getElementById('cart-items');
            const cartTotal = document.getElementById('cart-total');
            const cartCount = document.querySelector('.cart-count');
            
            // Product elements
            const addToCartBtns = document.querySelectorAll('.add-to-cart');
            const quantityInputs = document.querySelectorAll('.quantity-input');
            
            // Thumbnail gallery
            const thumbnails = document.querySelectorAll('.product-thumbnail');
            const mainImage = document.querySelector('.product-main-img');
            
            // Cart array to store items
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            
            // Initialize cart
            updateCart();
            
            // Cart toggle
            cartIcon.addEventListener('click', toggleCart);
            cartOverlay.addEventListener('click', toggleCart);
            closeCart.addEventListener('click', toggleCart);
            
            // Add to cart buttons
            addToCartBtns.forEach(btn => {
                btn.addEventListener('click', addToCart);
            });
            
            // Quantity buttons
            quantityInputs.forEach(input => {
                const minusBtn = input.previousElementSibling;
                const plusBtn = input.nextElementSibling;
                
                minusBtn.addEventListener('click', () => {
                    if (input.value > 1) {
                        input.value--;
                    }
                });
                
                plusBtn.addEventListener('click', () => {
                    input.value++;
                });
            });
            
            // Thumbnail click
            thumbnails.forEach(thumbnail => {
                thumbnail.addEventListener('click', function() {
                    // Remove active class from all thumbnails
                    thumbnails.forEach(t => t.classList.remove('active'));
                    // Add active class to clicked thumbnail
                    this.classList.add('active');
                    // Change main image
                    mainImage.src = this.dataset.main;
                });
            });
            
            // Functions
            function toggleCart() {
                cartOverlay.style.display = cartOverlay.style.display === 'block' ? 'none' : 'block';
                cartContainer.classList.toggle('active');
            }
            
            function addToCart(e) {
                const button = e.target;
                const id = button.dataset.id;
                const name = button.dataset.name;
                const price = parseFloat(button.dataset.price);
                const image = button.dataset.image;
                const quantity = parseInt(button.parentElement.querySelector('.quantity-input').value);
                
                // Check if item already in cart
                const existingItem = cart.find(item => item.id === id);
                
                if (existingItem) {
                    existingItem.quantity += quantity;
                } else {
                    cart.push({ id, name, price, image, quantity });
                }
                
                // Save to localStorage
                localStorage.setItem('cart', JSON.stringify(cart));
                
                // Update cart UI
                updateCart();
                
                // Show cart
                toggleCart();
            }
            
            function updateCart() {
                // Update cart items
                renderCartItems();
                
                // Update cart total
                updateCartTotal();
                
                // Update cart count
                updateCartCount();
            }
            
            function renderCartItems() {
                cartItemsContainer.innerHTML = '';
                
                if (cart.length === 0) {
                    cartItemsContainer.innerHTML = '<div class="empty-cart-message"><p>Your cart is empty</p></div>';
                    return;
                }
                
                cart.forEach(item => {
                    const cartItemEl = document.createElement('div');
                    cartItemEl.classList.add('cart-item');
                    cartItemEl.innerHTML = `
                        <img src="${item.image}" alt="${item.name}" class="cart-item-img">
                        <div class="cart-item-details">
                            <h4 class="cart-item-title">${item.name}</h4>
                            <div class="cart-item-price">$${item.price.toFixed(2)}</div>
                            <div class="cart-item-remove" data-id="${item.id}">Remove</div>
                            <div class="cart-item-quantity">
                                <button class="decrease" data-id="${item.id}">-</button>
                                <span>${item.quantity}</span>
                                <button class="increase" data-id="${item.id}">+</button>
                            </div>
                        </div>
                    `;
                    cartItemsContainer.appendChild(cartItemEl);
                });
                
                // Add event listeners to remove and quantity buttons
                document.querySelectorAll('.cart-item-remove').forEach(btn => {
                    btn.addEventListener('click', removeItem);
                });
                
                document.querySelectorAll('.decrease').forEach(btn => {
                    btn.addEventListener('click', decreaseQuantity);
                });
                
                document.querySelectorAll('.increase').forEach(btn => {
                    btn.addEventListener('click', increaseQuantity);
                });
            }
            
            function updateCartTotal() {
                const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                cartTotal.textContent = total.toFixed(2);
                
                // Also update checkout total if on checkout page
                const checkoutTotal = document.getElementById('checkout-total');
                const orderTotal = document.getElementById('order-total');
                if (checkoutTotal) checkoutTotal.textContent = total.toFixed(2);
                if (orderTotal) orderTotal.textContent = total.toFixed(2);
            }
            
            function updateCartCount() {
                const count = cart.reduce((sum, item) => sum + item.quantity, 0);
                cartCount.textContent = count;
            }
            
            function removeItem(e) {
                const id = e.target.dataset.id;
                cart = cart.filter(item => item.id !== id);
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCart();
            }
            
            function decreaseQuantity(e) {
                const id = e.target.dataset.id;
                const item = cart.find(item => item.id === id);
                
                if (item.quantity > 1) {
                    item.quantity--;
                } else {
                    cart = cart.filter(item => item.id !== id);
                }
                
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCart();
            }
            
            function increaseQuantity(e) {
                const id = e.target.dataset.id;
                const item = cart.find(item => item.id === id);
                item.quantity++;
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCart();
            }
            
            // Checkout functionality (would normally be on a separate page)
            const checkoutForm = document.getElementById('checkout-form');
            if (checkoutForm) {
                // Initialize Stripe
                const stripe = Stripe('pk_test_your_stripe_publishable_key'); // Replace with your actual key
                
                // Render order items
                renderCheckoutItems();
                
                checkoutForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    
                    const submitButton = document.getElementById('submit-button');
                    submitButton.disabled = true;
                    
                    try {
                        // Create payment intent on your server
                        const response = await fetch('/create-payment-intent', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                items: cart,
                                currency: 'usd',
                            }),
                        });
                        
                        const { clientSecret } = await response.json();
                        
                        // Confirm payment
                        const { error } = await stripe.confirmPayment({
                            elements,
                            clientSecret,
                            confirmParams: {
                                return_url: 'https://yourwebsite.com/order-confirmation',
                                receipt_email: document.getElementById('email').value,
                            },
                        });
                        
                        if (error) {
                            // Show error to customer
                            const messageContainer = document.querySelector('#payment-message');
                            messageContainer.textContent = error.message;
                            submitButton.disabled = false;
                        }
                    } catch (err) {
                        console.error(err);
                        submitButton.disabled = false;
                    }
                });
                
                function renderCheckoutItems() {
                    const checkoutItemsContainer = document.getElementById('checkout-items');
                    checkoutItemsContainer.innerHTML = '';
                    
                    cart.forEach(item => {
                        const itemEl = document.createElement('div');
                        itemEl.classList.add('order-item');
                        itemEl.innerHTML = `
                            <span>${item.name} Ã— ${item.quantity}</span>
                            <span>$${(item.price * item.quantity).toFixed(2)}</span>
                        `;
                        checkoutItemsContainer.appendChild(itemEl);
                    });
                }
            }
        });
    </script>
</body>
</html>